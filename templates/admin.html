{% extends "base.html" %}
{% block title %}Admin Panel - Online Shop{% endblock %}

{% block content %}
<section class="admin-panel bg-light py-5">
  <div class="container">
    <h2 class="mb-4 text-center fw-bold">Admin Panel</h2>

    <!-- Action Buttons -->
    <div class="d-flex justify-content-center mb-4 flex-wrap gap-2">
      <a href="{{ url_for('add_product') }}" class="btn btn-dark">
        <i class="bi bi-plus-circle"></i> Add New Product
      </a>
      <a href="{{ url_for('add_category') }}" class="btn btn-outline-dark">
        <i class="bi bi-folder-plus"></i> Add Category
      </a>
    </div>

    {% if not products %}
      <p class="text-center text-muted">No products available. Please add new products.</p>
    {% else %}
      <div class="table-responsive shadow-sm rounded-4">
        <table class="table table-hover align-middle border">
          <thead class="table-dark">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th>
              <th scope="col">Price (â‚¹)</th>
              <th scope="col">Category</th>
              <th scope="col">Image</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for product in products %}
            <tr>
              <td>{{ product.id }}</td>
              <td>{{ product.name }}</td>
              <td>{{ "%.2f"|format(product.price) }}</td>
              <td>{{ product.category.name if product.category else 'N/A' }}</td>
              <td>
                {% if product.image_filename %}
                  <img 
                    src="{{ url_for('static', filename='uploads/' + product.image_filename) }}" 
                    alt="{{ product.name }}" 
                    class="img-thumbnail rounded"
                    style="max-width: 100px;"
                  >
                {% else %}
                  <span class="text-muted">No Image</span>
                {% endif %}
              </td>
              <td class="text-center">
                <a href="{{ url_for('edit_product', product_id=product.id) }}" class="btn btn-sm btn-outline-dark me-2">
                  <i class="bi bi-pencil-square"></i> Edit
                </a>
                <form action="{{ url_for('delete_product', product_id=product.id) }}" method="POST" style="display:inline;">
                  <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this product?');">
                    <i class="bi bi-trash"></i> Delete
                  </button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>
</section>

<style>
  .table th, .table td {
    vertical-align: middle;
  }
  .table thead {
    background-color: #000;
    color: #fff;
  }
  .btn {
    border-radius: 0.5rem;
  }
  body {
    background-color: #f8f9fa;
  }
</style>
{% endblock %}
